{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","logo","alt","email","to","linkPath","onClick","e","preventDefault","onSignOut","buttonTitle","CurrentUserContext","react","createContext","Card","currentUser","React","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","name","onCardDelete","link","onCardClick","onCardLike","length","Main","avatar","onEditAvatarClick","onEditProfileClick","about","onAddPlaceClick","cards","map","Footer","PopupWithForm","isOpen","onClose","onSubmit","id","title","children","buttonText","ImagePopup","api","baseUrl","headers","res","ok","json","Promise","reject","status","token","fetch","this","authorization","then","_getResponseData","cardId","boolean","method","userName","userAbout","body","JSON","stringify","imageUrl","imageName","imageLink","console","log","all","getUserInfo","getInitialCards","Component","EditProfilePopup","useState","setName","description","setDescription","useEffect","onUpdateUser","placeholder","required","value","minLength","maxLength","onChange","event","target","EditAvatarPopup","avatarInputRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","onNewCard","ProtectedRoute","loggedIn","redirectTo","Login","setemail","password","setPassword","handleLogin","pattern","Register","setEmail","handleRegister","InfoTooltip","isSuccsess","BASE_URL","App","setCurrentUser","setCards","selectedCard","setSelectedCard","setLoggedIn","currenEmail","setcurrenEmail","history","useHistory","localStorage","getItem","JWT","Authorization","push","catch","err","getAllInfo","userInfo","cardArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isCardPopupOpen","setIsCardPopupOpen","isInfoTooltip","setInfoTooltip","isInfoTooltipSuccsess","setInfoTooltipSuccsess","closeAllPopups","path","Accept","setItem","finally","strict","Provider","setUserInfo","setAvatarImage","addNewCard","newCard","removeItem","item","changeLikeCardStatus","state","removeCard","newCardList","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e9e91763.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c7581985.svg\";","import logo from \"../images/logo.svg\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function Header(props) {\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n    props.onSignOut();\r\n  };\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"logo\" src={logo} alt=\"Around The U.S. logo\" />\r\n      <div className=\"header__nav-container\">\r\n        <p className=\"header__email\">{props.email}</p>\r\n        <Link\r\n          className=\"header__link\"\r\n          to={props.linkPath ? props.linkPath : \"/signin\"}\r\n          onClick={props.email ? handleClick : null}\r\n        >\r\n          {props.buttonTitle}\r\n        </Link>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import react from \"react\";\r\n\r\nexport const CurrentUserContext = react.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport function Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  // Checking if the current user is the owner of the current card\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  // Creating a variable which you'll then set in `className` for the delete button\r\n  const cardDeleteButtonClassName = `element__delete ${\r\n    isOwn ? \" element__delete_visible\" : \"element__delete_hidden\"\r\n  }`;\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n\r\n  // Check if the card was liked by the current user\r\n  const isLiked = props.card.likes.some((i) => i._id === currentUser._id);\r\n\r\n  // Create a variable which you then set in `className` for the like button\r\n  const cardLikeButtonClassName = `${\r\n    isLiked ? \"heart-button heart-button_active\" : \"heart-button\"\r\n  }`;\r\n\r\n  return (\r\n    <div className=\"element\">\r\n      <button\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n        name=\"element-delete-button\"\r\n        onClick={handleDeleteClick}\r\n      ></button>\r\n      <img\r\n        className=\"element__img\"\r\n        src={`${props.card.link}`}\r\n        alt={`${props.card.name}`}\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"element__container\">\r\n        <h2 className=\"element__container-heading\">{`${props.card.name}`}</h2>\r\n        <div className=\"element__container-heartbutton\">\r\n          <button\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n            name=\"heart-button\"\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"image-likes\">{`${props.card.likes.length}`}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Card } from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport function Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <div className=\"profile__avatar-container\">\r\n            <img\r\n              src={`${currentUser.avatar}`}\r\n              className=\"profile__avatar\"\r\n              alt=\"Avatar that describe the user\"\r\n            />\r\n            <div\r\n              className=\"profile__avatar-overlay\"\r\n              onClick={props.onEditAvatarClick}\r\n            ></div>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__info-heading-container\">\r\n              <h1 className=\"profile__info-heading\">{`${currentUser.name}`}</h1>\r\n              <button\r\n                type=\"button\"\r\n                className=\"profile__info-edit hover\"\r\n                onClick={props.onEditProfileClick}\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__info-description\">{`${currentUser.about}`}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className=\"profile__add-button hover\"\r\n          onClick={props.onAddPlaceClick}\r\n        ></button>\r\n      </section>\r\n      <section className=\"elements\">\r\n        {props.cards.map((card) => {\r\n          return (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardClick={props.onCardClick}\r\n              onCardLike={props.onCardLike}\r\n              onCardDelete={props.onCardDelete}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","export function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">Â© 2021 Around The U.S.</p>\r\n    </footer>\r\n  );\r\n}\r\n","export function PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup-${props.name} ${\r\n        props.isOpen ? \"popup_open\" : \"\"\r\n      }`}\r\n    >\r\n      <div className={`popup-${props.name}__container`}>\r\n        <button\r\n          onClick={props.onClose}\r\n          className=\"popup__close hover\"\r\n          type=\"button\"\r\n        ></button>\r\n        <form onSubmit={props.onSubmit}\r\n          className=\"popup__form\"\r\n          name={`popup-${props.name}-form`}\r\n          id={`popup-${props.name}__form`}\r\n        >\r\n          <h2\r\n            className={`popup-${props.name}__form-heading`}\r\n          >{`${props.title}`}</h2>\r\n          {props.children}\r\n          <button className=\"popup__button\" type=\"submit\">\r\n            {props.buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export function ImagePopup(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup popup-image ${props.isOpen ? \"popup_open\" : \"\"}`}\r\n      // classNameName={`popup popup popup-image ${\r\n      //   props.card.name ? \"popup_open\" : \"\"\r\n      // }`}\r\n    >\r\n      <div className=\"popup-image__container\">\r\n        <button\r\n          onClick={props.onClose}\r\n          className=\"popup__close hover\"\r\n          type=\"button\"\r\n        ></button>\r\n        <img\r\n          className=\"popup-image__image\"\r\n          src={`${props.card.link}`}\r\n          alt={`${props.card.name}`}\r\n        />\r\n\r\n        <h2 className=\"popup-image__name\">{`${props.card.name}`}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nclass Api extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.baseUrl = props.baseUrl;\r\n    this.headers = props.headers;\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  getInitialCards(token) {\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, boolean, token) {\r\n    if (boolean) {\r\n      return fetch(`${this.baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) => this._getResponseData(res));\r\n    }\r\n    if (!boolean) {\r\n      return fetch(`${this.baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) => this._getResponseData(res));\r\n    }\r\n  }\r\n\r\n  removeCard(cardId, token) {\r\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  setUserInfo(userName, userAbout, token) {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: userName,\r\n        about: userAbout,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  setAvatarImage(imageUrl, token) {\r\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: `${imageUrl}`,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  addNewCard(imageName, imageLink, token) {\r\n    console.log(imageName);\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: imageName,\r\n        link: imageLink,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  }\r\n\r\n  getAllInfo(token) {\r\n    return Promise.all([this.getUserInfo(token), this.getInitialCards(token)]);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"http://localhost:3000\",\r\n});\r\n\r\n// const api = new Api({\r\n//   baseUrl: \"https://around.nomoreparties.co/v1/group-12\",\r\n//   headers: {\r\n//     authorization: \"9d69919a-c5e6-499a-8de5-d578571e9e77\",\r\n//     \"Content-Type\": \"application/json\",\r\n//   },\r\n// });\r\nexport default api;\r\n","import React, { useState } from \"react\";\r\nimport { PopupWithForm } from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport function EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = useState(currentUser.name);\r\n  const [description, setDescription] = useState(currentUser.about);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  function handleNameChange(event) {\r\n    setName(event.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(event) {\r\n    setDescription(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Prevent the browser from navigating to the form address\r\n    e.preventDefault();\r\n    // Pass the values of the managed components to the external handler\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Edit profile\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      buttonText=\"Save\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        name=\"popup-profile-profile-name-input\"\r\n        className=\"popup__input\"\r\n        id=\"popup-profile__form-input_name\"\r\n        type=\"text\"\r\n        placeholder=\"Jacques Cousteau\"\r\n        required\r\n        value={name || \"\"}\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        onChange={handleNameChange}\r\n      />\r\n      <span\r\n        id=\"popup-profile__form-input_name-error\"\r\n        className=\"popup__error\"\r\n      ></span>\r\n      <input\r\n        id=\"popup-profile__form-input_job\"\r\n        name=\"popup-profile-job-input\"\r\n        className=\"popup__input\"\r\n        type=\"text\"\r\n        placeholder=\"Explorer\"\r\n        required\r\n        value={description || \"\"}\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        onChange={handleDescriptionChange}\r\n      />\r\n      <span\r\n        id=\"popup-profile__form-input_job-error\"\r\n        className=\"popup__error\"\r\n      ></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { PopupWithForm } from \"./PopupWithForm\";\r\n\r\nexport function EditAvatarPopup(props) {\r\n  const avatarInputRef = useRef(null);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onUpdateAvatar({\r\n      avatar: avatarInputRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avataredit\"\r\n      title=\"Change profile picture\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      buttonText=\"Save\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        name=\"popup-avataredit-profile-link-input\"\r\n        className=\"popup__input\"\r\n        id=\"popup-avataredit__form-input_link\"\r\n        type=\"url\"\r\n        placeholder=\"Jacques Cousteau\"\r\n        required\r\n        minLength=\"2\"\r\n        ref={avatarInputRef}\r\n      />\r\n      <span\r\n        id=\"popup-avataredit__form-input_link-error\"\r\n        className=\"popup__error\"\r\n      ></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { PopupWithForm } from \"./PopupWithForm\";\r\n\r\nexport function AddPlacePopup(props) {\r\n  const [name, setName] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n\r\n  function handleNameChange(event) {\r\n    setName(event.target.value);\r\n  }\r\n\r\n  function handleLinkChange(event) {\r\n    setLink(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Prevent the browser from navigating to the form address\r\n    e.preventDefault();\r\n    props.onNewCard({\r\n      name,\r\n      link,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(\"\");\r\n    setLink(\"\");\r\n  }, [props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card\"\r\n      title=\"New place\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      buttonText=\"Create\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        name=\"popup-card-title-input\"\r\n        className=\"popup__input\"\r\n        id=\"popup-card__form-input_title\"\r\n        type=\"text\"\r\n        placeholder=\"Title\"\r\n        required\r\n        value={name || \"\"}\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        onChange={handleNameChange}\r\n      />\r\n      <span\r\n        id=\"popup-card__form-input_title-error\"\r\n        className=\"popup__error\"\r\n      ></span>\r\n      <input\r\n        id=\"popup-card__form-input_imgurl\"\r\n        name=\"popup-card-imgurl-input\"\r\n        className=\"popup__input\"\r\n        type=\"url\"\r\n        value={link || \"\"}\r\n        placeholder=\"Image link\"\r\n        required\r\n        onChange={handleLinkChange}\r\n      />\r\n      <span\r\n        id=\"popup-card__form-input_imgurl-error\"\r\n        className=\"popup__error\"\r\n      ></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import { Route, Redirect } from \"react-router-dom\";\r\n\r\n/* takes a component as a prop, as well as any number of\r\nprops to pass down to that component */\r\nconst ProtectedRoute = (props) => {\r\n  return (\r\n    <Route>\r\n      {props.loggedIn ? props.children : <Redirect to={props.redirectTo} />}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function Login(props) {\r\n  const [email, setemail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.handleLogin({email, password})\r\n  };\r\n  return (\r\n    <main className=\"main\">\r\n      <div className=\"login\">\r\n        <h1 className=\"login__welcome\">Log in</h1>\r\n        <form onSubmit={handleSubmit} className=\"login__form\">\r\n          <input\r\n            className=\"login__input\"\r\n            placeholder=\"Email\"\r\n            id=\"email\"\r\n            required\r\n            name=\"email\"\r\n            type=\"email\"\r\n            pattern='[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$'\r\n            value={email}\r\n            onChange={(e) => setemail(e.target.value)}\r\n          />\r\n          <input\r\n            className=\"login__input\"\r\n            placeholder=\"Password\"\r\n            id=\"password\"\r\n            required\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <div className=\"login__button-container\">\r\n            <button type=\"submit\" className=\"login__link\">\r\n            Log in\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"login__signup\">\r\n          <p>Not a member yet?</p>\r\n          <Link to=\"/signup\" className=\"signup__link\">\r\n          Sign up here! \r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function Register(props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.handleRegister({ email, password });\r\n  };\r\n  return (\r\n    <main className=\"main\">\r\n      <div className=\"register\">\r\n        <h1 className=\"register__welcome\">Sign up</h1>\r\n        <form onSubmit={handleSubmit} className=\"register__form\">\r\n          <input\r\n            className=\"register__input\"\r\n            placeholder=\"Email\"\r\n            id=\"email\"\r\n            required\r\n            name=\"email\"\r\n            type=\"email\"\r\n            pattern='[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$'\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <input\r\n            className=\"register__input\"\r\n            placeholder=\"Password\"\r\n            id=\"password\"\r\n            required\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <div className=\"register__button-container\">\r\n            <button type=\"submit\" className=\"register__button\">\r\n              Sign up\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"register__signup\">\r\n          <p>Already a member? </p>\r\n          <Link to=\"/signin\" className=\"register__signup_link\">\r\n            Log in here!\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","export const InfoTooltip = (props) => {\r\n  return (\r\n    <div\r\n      className={`popup popup popup-image ${props.isOpen ? \"popup_open\" : \"\"}`}\r\n    >\r\n      <div className=\"InfoTooltip__container\">\r\n        <button\r\n          onClick={props.onClose}\r\n          className=\"popup__close hover\"\r\n          type=\"button\"\r\n        ></button>\r\n        <div\r\n          className={\r\n            props.isSuccsess ? \"InfoTooltip__success\" : \"InfoTooltip__unsuccess\"\r\n          }\r\n        ></div>\r\n        <h2 className=\"InfoTooltip__title\">\r\n          {props.isSuccsess\r\n            ? \"Success! You have now been registered.\"\r\n            : \"Oops, something went wrong! Please try again.\"}\r\n        </h2>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","export const BASE_URL = \"http://localhost:3000\";\r\n\r\nconst _getResponseData = (res) => {\r\n  if (!res.ok) {\r\n    return Promise.reject(`Error: ${res.status}`);\r\n  }\r\n  return res.json();\r\n};\r\n\r\nexport const signup = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) => _getResponseData(res));\r\n};\r\n\r\nexport const signin = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => _getResponseData(res));\r\n};\r\n\r\nexport const checkToken = (JWT) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${JWT}`,\r\n    },\r\n  }).then((res) => _getResponseData(res));\r\n};\r\n","import \"../index.css\";\r\nimport { Header } from \"./Header\";\r\nimport { Main } from \"./Main\";\r\nimport { Footer } from \"./Footer\";\r\nimport { PopupWithForm } from \"./PopupWithForm\";\r\nimport { ImagePopup } from \"./ImagePopup\";\r\nimport React, { useState } from \"react\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport api from \"../utils/api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { EditProfilePopup } from \"./EditProfilePopup\";\r\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\r\nimport { AddPlacePopup } from \"./AddPlacePopup\";\r\nimport ProtectedRoute from \"./ProtectedRoute.js\";\r\nimport { Login } from \"./Login\";\r\nimport { Register } from \"./Register\";\r\nimport { InfoTooltip } from \"./InfoTooltip\";\r\nimport * as auth from \"../utils/auth.js\";\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [currenEmail, setcurrenEmail] = useState(\"\");\r\n  const history = useHistory();\r\n  // const [token, setToken] = useState(localStorage.getItem(\"jwt\"));\r\n  const token = localStorage.getItem(\"jwt\");\r\n\r\n  React.useEffect(() => {\r\n    if (token) {\r\n      auth\r\n        .checkToken(token)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);\r\n            history.push(\"/\");\r\n            setcurrenEmail(res.email);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [token, history]);\r\n\r\n  React.useEffect(() => {\r\n    api\r\n      .getAllInfo(token)\r\n      .then(([userInfo, cardArray]) => {\r\n        setCurrentUser(userInfo);\r\n        setCards(cardArray);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [token]);\r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isCardPopupOpen, setIsCardPopupOpen] = useState(false);\r\n  const [isInfoTooltip, setInfoTooltip] = useState(false);\r\n  const [isInfoTooltipSuccsess, setInfoTooltipSuccsess] = useState(false);\r\n\r\n  function handleCardLike(card) {\r\n    // Check one more time if this card was already liked\r\n    const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n    // Send a request to the API and getting the updated card data\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked, token)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((item) => (item._id === card._id ? newCard : item))\r\n        );\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    // check one more time if the onwer of the image\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    if (isOwn) {\r\n      api\r\n        .removeCard(card._id, token)\r\n        .then(() => {\r\n          const newCardList = cards.filter((item) => !(item._id === card._id));\r\n          setCards(newCardList);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  function handleAddPlaceSubmit(props) {\r\n    api\r\n      .addNewCard(props.name, props.link, token)\r\n      .then((newCard) => {\r\n        console.log(newCard);\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleUserRegister(props) {\r\n    auth\r\n      .signup(props.email, props.password)\r\n      .then(() => {\r\n        setInfoTooltipSuccsess(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setInfoTooltipSuccsess(false);\r\n      })\r\n      .finally(() => setInfoTooltip(true));\r\n  }\r\n\r\n  function onLogin(props) {\r\n    auth\r\n      .signin(props.password, props.email)\r\n      .then((res) => {\r\n        if (res.token) {\r\n          localStorage.setItem(\"jwt\", res.token);\r\n          setcurrenEmail(props.email);\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function onSignOut(props) {\r\n    localStorage.removeItem(\"jwt\");\r\n    history.push(\"/signin\");\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setIsCardPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsCardPopupOpen(false);\r\n    setSelectedCard({});\r\n    setInfoTooltip(false);\r\n  }\r\n\r\n  function handleUpdateUser(props) {\r\n    api\r\n      .setUserInfo(props.name, props.about, token)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleAvatarUpdate(props) {\r\n    api\r\n      .setAvatarImage(props.avatar, token)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page__container\">\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltip}\r\n          onClose={closeAllPopups}\r\n          isSuccsess={isInfoTooltipSuccsess}\r\n        />\r\n        <Switch>\r\n          <Route path=\"/signin\">\r\n            <Header buttonTitle=\"Sign Up\" linkPath=\"/signup\" />\r\n            <Login handleLogin={onLogin} />\r\n            <Footer />\r\n          </Route>\r\n\r\n          <Route path=\"/signup\">\r\n            <Header buttonTitle=\"Sign In\" linkPath=\"/signin\" />\r\n            <Register handleRegister={handleUserRegister} />\r\n            <Footer />\r\n          </Route>\r\n\r\n          <ProtectedRoute\r\n            strict\r\n            path=\"/\"\r\n            loggedIn={loggedIn}\r\n            redirectTo=\"/signin\"\r\n          >\r\n            <CurrentUserContext.Provider value={currentUser}>\r\n              <EditProfilePopup\r\n                isOpen={isEditProfilePopupOpen}\r\n                onClose={closeAllPopups}\r\n                onUpdateUser={handleUpdateUser}\r\n              ></EditProfilePopup>\r\n              <EditAvatarPopup\r\n                isOpen={isEditAvatarPopupOpen}\r\n                onClose={closeAllPopups}\r\n                onUpdateAvatar={handleAvatarUpdate}\r\n              />\r\n              <AddPlacePopup\r\n                isOpen={isAddPlacePopupOpen}\r\n                onClose={closeAllPopups}\r\n                onNewCard={handleAddPlaceSubmit}\r\n              ></AddPlacePopup>\r\n              <PopupWithForm\r\n                name=\"delete\"\r\n                title=\"Are you sure?\"\r\n                buttonText=\"Yes\"\r\n              ></PopupWithForm>\r\n              <ImagePopup\r\n                isOpen={isCardPopupOpen}\r\n                onClose={closeAllPopups}\r\n                card={selectedCard}\r\n              />\r\n              <Header\r\n                email={currenEmail}\r\n                buttonTitle=\"Sign out\"\r\n                onSignOut={onSignOut}\r\n              />\r\n              <Main\r\n                onEditProfileClick={handleEditProfileClick}\r\n                onAddPlaceClick={handleAddPlaceClick}\r\n                onEditAvatarClick={handleEditAvatarClick}\r\n                onCardClick={handleCardClick}\r\n                cards={cards}\r\n                onCardLike={handleCardLike}\r\n                onCardDelete={handleCardDelete}\r\n              ></Main>\r\n              <Footer />\r\n            </CurrentUserContext.Provider>\r\n          </ProtectedRoute>\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}